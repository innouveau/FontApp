{"remainingRequest":"/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/src/components/presentation/directions/direction.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/src/components/presentation/directions/direction.vue","mtime":1614199291955},{"path":"/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jeroen/Documents/_work/innouveau/projects/clients/024-klaas-nienhuis/024-bartenbach/dev/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBEaXJlY3Rpb24gZnJvbSAnQC9jbGFzc2VzL0RpcmVjdGlvbic7CgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnZGlyZWN0aW9uJywKICAgIGNvbXBvbmVudHM6IHt9LAogICAgcHJvcHM6IHsKICAgICAgICBkaXJlY3Rpb246IHsKICAgICAgICAgICAgdHlwZTogRGlyZWN0aW9uLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxlZnQ6IDAsCiAgICAgICAgICAgIHRvcDogMAogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIGlzb0NvZGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5sYW5ndWFnZXMuY3VycmVudC5pc29fY29kZTsKICAgICAgICB9LAogICAgICAgIHRpdGxlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb24udGl0bGVbdGhpcy5pc29Db2RlXQogICAgICAgIH0sCiAgICAgICAgZGVzY3JpcHRpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbi5kZXNjcmlwdGlvblt0aGlzLmlzb0NvZGVdCiAgICAgICAgfSwKICAgICAgICBjdXJyZW50SW5kZXgoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5kaXJlY3Rpb25zLmFsbC5pbmRleE9mKHRoaXMuZGlyZWN0aW9uKTsKICAgICAgICB9LAogICAgICAgIGxhc3RJdGVtKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50SW5kZXggPT09IHRoaXMuJHN0b3JlLnN0YXRlLmRpcmVjdGlvbnMuYWxsLmxlbmd0aCAtIDE7CiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBtZWFzdXJlKCkgewogICAgICAgICAgICBsZXQgZWxlbWVudCwgYmIsIG1hcmdpbkhvcml6b250YWwsIG1hcmdpblZlcnRpY2FsLCBwb2ludGVyV2lkdGgsIHBvaW50ZXJIZWlnaHQ7CiAgICAgICAgICAgIHBvaW50ZXJXaWR0aCA9IDQwOwogICAgICAgICAgICBwb2ludGVySGVpZ2h0ID0gMzI7CiAgICAgICAgICAgIG1hcmdpblZlcnRpY2FsID0gMTI7CiAgICAgICAgICAgIG1hcmdpbkhvcml6b250YWwgPSAxMjsKICAgICAgICAgICAgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZGlyZWN0aW9uLmVsZW1lbnQpOwogICAgICAgICAgICBpZiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgYmIgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbi5wb3NpdGlvbiA9PT0gJ3RvcCcpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmxlZnQgPSBiYi5sZWZ0ICsgKDAuNSAqIGJiLndpZHRoKSAtICgwLjUgKiBwb2ludGVyV2lkdGgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMudG9wID0gYmIudG9wIC0gcG9pbnRlckhlaWdodCAtIG1hcmdpblZlcnRpY2FsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbi5wb3NpdGlvbiA9PT0gJ2xlZnQnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0ID0gYmIubGVmdCAgLSBwb2ludGVyV2lkdGggLSBtYXJnaW5Ib3Jpem9udGFsOwogICAgICAgICAgICAgICAgICAgIHRoaXMudG9wID0gYmIudG9wICsgKDAuNSAqIGJiLmhlaWdodCkgLSAoMC41ICogcG9pbnRlckhlaWdodCk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRWxlbWVudCAnICsgdGhpcy5kaXJlY3Rpb24uZWxlbWVudCArICcgbm90IGZvdW5kLCBjaGVjayBwcm9wZXJ0eSAiZWxlbWVudCIgaW4gZGlyZWN0aW9ucy5qcycpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG5leHREaXJlY3Rpb24oKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmRpcmVjdGlvbi5hY3Rpb24pIHsKICAgICAgICAgICAgICAgIHRoaXMuZGlyZWN0aW9uLmFjdGlvbigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHdhaXQgYSBjYWxsc3RhY2ssIHRoZSBhY3Rpb24gbWlnaHQgbmVlZCByZW5kZXJpbmcKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5sYXN0SXRlbSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3VpL3VwZGF0ZVByb3BlcnR5Jywge2tleTogJ3BvcHVwTmF2aWdhdGlvbicsIHZhbHVlOiB0cnVlfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnZGlyZWN0aW9ucy9zZXRDdXJyZW50JywgdGhpcy4kc3RvcmUuc3RhdGUuZGlyZWN0aW9ucy5hbGxbdGhpcy5jdXJyZW50SW5kZXggKyAxXSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBjbG9zZSgpIHsKICAgICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdkaXJlY3Rpb25zL3NldEN1cnJlbnQnLCBudWxsKTsKICAgICAgICB9CiAgICB9LAogICAgbW91bnRlZCgpewogICAgICAgIHRoaXMubWVhc3VyZSgpOwogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgZGlyZWN0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMubWVhc3VyZSgpOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["direction.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"direction.vue","sourceRoot":"src/components/presentation/directions","sourcesContent":["<script>\n    import Direction from '@/classes/Direction';\n\n    export default {\n        name: 'direction',\n        components: {},\n        props: {\n            direction: {\n                type: Direction,\n                required: true\n            }\n        },\n        data() {\n            return {\n                left: 0,\n                top: 0\n            }\n        },\n        computed: {\n            isoCode() {\n                return this.$store.state.languages.current.iso_code;\n            },\n            title() {\n                return this.direction.title[this.isoCode]\n            },\n            description() {\n                return this.direction.description[this.isoCode]\n            },\n            currentIndex() {\n                return this.$store.state.directions.all.indexOf(this.direction);\n            },\n            lastItem() {\n                return this.currentIndex === this.$store.state.directions.all.length - 1;\n            }\n        },\n        methods: {\n            measure() {\n                let element, bb, marginHorizontal, marginVertical, pointerWidth, pointerHeight;\n                pointerWidth = 40;\n                pointerHeight = 32;\n                marginVertical = 12;\n                marginHorizontal = 12;\n                element = document.getElementById(this.direction.element);\n                if (element) {\n                    bb = element.getBoundingClientRect();\n\n                    if (this.direction.position === 'top') {\n                        this.left = bb.left + (0.5 * bb.width) - (0.5 * pointerWidth);\n                        this.top = bb.top - pointerHeight - marginVertical;\n                    }\n\n                    if (this.direction.position === 'left') {\n                        this.left = bb.left  - pointerWidth - marginHorizontal;\n                        this.top = bb.top + (0.5 * bb.height) - (0.5 * pointerHeight);\n                    }\n\n                } else {\n                    console.error('Element ' + this.direction.element + ' not found, check property \"element\" in directions.js')\n                }\n            },\n            nextDirection() {\n                if (this.direction.action) {\n                    this.direction.action();\n                }\n                // wait a callstack, the action might need rendering\n                setTimeout(() => {\n                    if (this.lastItem) {\n                        this.close();\n                        this.$store.commit('ui/updateProperty', {key: 'popupNavigation', value: true});\n                    } else {\n                        this.$store.commit('directions/setCurrent', this.$store.state.directions.all[this.currentIndex + 1]);\n                    }\n                })\n            },\n            close() {\n                this.$store.commit('directions/setCurrent', null);\n            }\n        },\n        mounted(){\n            this.measure();\n        },\n        watch: {\n            direction: function () {\n                this.measure();\n            }\n        }\n    }\n</script>\n\n\n<template>\n    <div\n        :style=\"{'left': left + 'px', 'top': top + 'px'}\"\n        :class=\"{\n            'direction--position-left': direction.position === 'left',\n            'direction--position-top': direction.position === 'top',\n            'direction--orientation-top': direction.orientation === 'top',\n            'direction--orientation-left': direction.orientation === 'left',\n            'direction--orientation-right': direction.orientation === 'right',\n        }\"\n        class=\"direction\">\n        <div class=\"description__body\">\n            <div class=\"direction__title\">\n                {{title}}\n            </div>\n            <div class=\"direction__description\">\n                {{description}}\n            </div>\n            <div class=\"direction__footer\">\n                <div\n                    @click=\"nextDirection()\"\n                    class=\"button\">\n                    {{translate('continue', true)}}\n                </div>\n            </div>\n            <div\n                @click=\"close()\"\n                class=\"close-button\"></div>\n        </div>\n    </div>\n</template>\n\n\n<style lang=\"scss\">\n    @import '@/styles/variables.scss';\n\n    $direction-margin: 80px;\n    $pointer-height: 32px;\n\n    .direction {\n        position: absolute;\n        z-index: 10;\n        width: 0;\n        height: 0;\n        border-width: $pointer-height 20px 0 20px;\n        border-color: rgba(234,240,255,0.7) transparent transparent transparent;\n        border-style: solid;\n\n        .description__body {\n            position: absolute;\n            left: 0;\n            bottom: calc(100% + #{$pointer-height});\n            border-radius: 32px;\n            padding: 30px 50px 30px 34px;\n            background: transparent linear-gradient(180deg, rgba(244,247,255,0.7) 0%, rgba(234,240,255,0.7) 100%) 0 0 no-repeat padding-box;\n            backdrop-filter: blur(22px);\n            -webkit-backdrop-filter: blur(22px);            \n            transform: translateX(-50%);\n\n            .direction__title {\n                color: $main-blue;\n                font-weight: 800;\n                font-size: 23px;\n                margin-bottom: 30px;\n            }\n\n            .direction__description {\n                font-size: 17px;\n                margin-bottom: 60px;\n                width: 305px;\n            }\n\n            .direction__footer {\n                display: flex;\n                justify-content: center;\n            }\n        }\n\n        &.direction--orientation-left {\n\n            .description__body {\n                transform: translateX(calc(-100% + #{$direction-margin}));\n            }\n        }\n\n        &.direction--orientation-right {\n\n            .description__body {\n                transform: translateX(-#{$direction-margin});\n            }\n        }\n\n        &.direction--position-left {\n            border-width: 20px 0 20px 32px;\n            border-color: transparent transparent transparent rgba(234,240,255,0.8);\n\n            .description__body {\n                bottom: 0;\n                left: auto;\n                right: calc(100% + #{$pointer-height});\n                transform: translate(0, 50%);\n            }\n\n            &.direction--orientation-top {\n\n                .description__body {\n                    transform: translate(0, #{$direction-margin});\n                }\n            }\n        }\n\n        @include mobile() {\n\n            .description__body {\n                padding: 20px 40px 20px 20px;\n\n                .direction__title {\n                    font-size: 18px;\n                    margin-bottom: 20px;\n                }\n\n                .direction__description {\n                    font-size: 14px;\n                    margin-bottom: 50px;\n                    width: 210px;\n                }\n\n                .close-button {\n                    top: 20px;\n                    right: 20px;\n                }\n            }\n\n        }\n    }\n</style>"]}]}